# AI 场景感知助手

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![Greasy Fork](https://img.shields.io/greasyfork/v/YOUR_SCRIPT_ID?label=Greasy%20Fork&logo=tampermonkey)](https://greasyfork.org/zh-CN/scripts/YOUR_SCRIPT_ID) <!-- 请将 YOUR_SCRIPT_ID 替换为你的脚本在 Greasy Fork 上的 ID -->

一个懂你心思、会吐槽、能监督你学习的 AI 看板娘油猴脚本。它不仅能感知你正在浏览的内容并给出俏皮评论，还能在你“摸鱼”太久时，用 AI 生成的警句将你拉回正轨。

[English](./README.en.md) <!-- 如果您打算提供英文版，可以保留此链接 -->

---

## 📖 项目介绍

**AI 场景感知助手** 是一个创新的浏览器增强工具，它在你的网页右下角（或任何你喜欢的位置）派驻了一位可拖动的 AI 看板娘。这位看板娘具备两种核心模式：

1.  **俏皮伴侣模式**：在你日常浏览网页时，她会观察你选中的文字、悬停的内容，甚至是你当前页面的主题，然后用一句简短、风趣、有时略带毒舌的评论来与你互动，为你的网上冲浪增添乐趣。
2.  **学习监督模式**：当你开启此功能，她会化身严师。通过 AI 智能分析你访问的网站是用于学习还是“摸鱼”（娱乐、社交等）。如果你在摸鱼网站停留太久，或单位时间内摸鱼总时长超标，她会弹出**全屏警句**来提醒你，而且**超时越久，关闭提醒的等待时间就越长**！

本项目旨在探索 AI 与日常浏览器交互的更多可能性，让你在享受 AI 带来便利和乐趣的同时，也能更好地管理自己的注意力。

## ✨ 特色功能

*   **智能场景感知**：能通过 AI 分析页面标题、URL 和核心文本内容，理解你当前所处的网络环境。
*   **即时响应互动**：对你**选中的文字**、**鼠标悬停的元素**做出即时 AI 回应，仿佛有个人在陪你一起看。
*   **学习/摸鱼智能分类**：利用 AI 判断当前网站的主要用途，自动为你开启“摸鱼”计时。
*   **全屏警句提醒**：当你摸鱼超时，会触发全屏提醒，并由 AI 动态生成一句直击灵魂的警句，激励你回归学习或工作。
*   **递增惩罚机制**：摸鱼超时越久，关闭全屏提醒的“冷静期”就越长，有效提高自律门槛。
*   **高度可定制**：支持自定义 API Endpoint、模型、API Key、摸鱼时间阈值、强制摸鱼网站列表等，完全由你掌控。
*   **可拖拽看板娘**：看板娘的位置可以随意拖动，不会遮挡你的视线。

## ⚠️ 前提条件

在使用此脚本前，请确保你已满足以下两个条件：

1.  **浏览器和油猴插件**：
    *   一个现代浏览器，如 Chrome、Firefox、Edge 等。
    *   已安装 [**Tampermonkey**](https://www.tampermonkey.net/) 浏览器扩展。

2.  **AI API 服务**：
    *   本脚本需要连接到一个**兼容 OpenAI API 格式**的 AI 服务。
    *   **强烈推荐本地 AI 模型**，如使用 `LM Studio`, `Ollama`, `GPT-SoVITS` 等工具在本地部署大语言模型。这样可以保证隐私、速度和零成本。
        *   脚本默认的 API Endpoint 是 `http://127.0.0.1:52112/v1/chat/completions`，这是为本地服务预设的。
    *   当然，你也**可以使用云端 AI 服务**，例如 OpenAI, DeepSeek, Kimi, Zhipu AI 等。只需将 API Endpoint 和 API Key 修改为对应服务商提供的值即可。

## 🚀 安装与配置

**第一步：安装脚本**

点击下方链接进行安装：

*   [**从 Greasy Fork 安装**](https://greasyfork.org/zh-CN/scripts/YOUR_SCRIPT_ID) <!-- 再次提醒：替换 YOUR_SCRIPT_ID -->

**第二步：配置 AI 服务**

这是最关键的一步。安装脚本后，打开任意网页，点击浏览器右上角的 Tampermonkey 图标，在弹出的菜单中找到本脚本的配置项。

1.  **设置 API Endpoint**：
    *   **如果你使用本地模型 (例如 LM Studio)**：通常地址是 `http://127.0.0.1:1234/v1/chat/completions`。请根据你的本地服务软件调整端口号。
    *   **如果你使用云端服务 (例如 DeepSeek)**：地址是 `https://api.deepseek.com/v1/chat/completions`。
    *   点击 `设置 API Endpoint` 菜单，输入你的地址。

2.  **设置 API Key**：
    *   **如果你使用本地模型**：API Key 通常是可选的，可以随便填写或留空。
    *   **如果你使用云端服务**：请在此处填入你的服务商提供的 API Key。
    *   点击 `设置 API Key` 菜单，输入你的 Key。

3.  **设置模型名称**：
    *   **如果你使用本地模型**：填入你加载的模型名称，例如 `DeepSeek-V2-Lite-Chat`。
    *   **如果你使用云端服务**：填入服务商支持的模型名称，例如 `deepseek-chat`。
    *   点击 `设置模型名称` 菜单，输入模型名。

完成以上三项配置后，刷新页面，如果看板娘出现并显示 `😊` 或 `摸鱼中` 等状态，说明配置成功！

## 📖 使用方法

### 看板娘互动

*   **拖拽**：按住看板娘的圆形身体，可以将其拖动到屏幕任意位置。
*   **手动触发**：单击看板娘，她会立即对当前页面进行分析并发表评论。
*   **划词触发**：在页面上选中一段文字，稍等片刻，她会对你选中的内容做出回应。
*   **悬停触发**：将鼠标在某个文本块（如标题、段落）上停留几秒钟，也可能触发她的评论。

### 学习提醒功能

该功能默认开启，无需额外操作。

*   **自动分类**：当你访问一个新网站时，看板娘会显示 `分析中...`，通过 AI 判断网站类型。
*   **状态显示**：
    *   `学习中📚`：当前被判定为学习/工作网站，不会计时。
    *   `摸鱼中` 或 `xx / xx m`：当前被判定为摸鱼网站，已启动计时。
*   **全屏警告**：当摸鱼时间超过你在菜单中设置的阈值时，会触发全屏警告。你需要等待一个短暂的倒计时后才能关闭它。

### 菜单配置项详解

通过 Tampermonkey 菜单，你可以对脚本进行详细设置：

*   `设置 API Key / Endpoint / 模型名称`: 核心 API 配置，见上方。
*   `看板娘: ✅ 已启用 / ❌ 已禁用`: 总开关，可以临时禁用或启用整个脚本（需刷新生效）。
*   `学习提醒: ✅ 已启用 / ❌ 已禁用`: 单独控制学习提醒功能的开关（需刷新生效）。
*   `设置强制摸鱼网站`: 添加一些域名（用英文逗号隔开），这些网站将**跳过 AI 判断**，直接被视为摸鱼网站。例如：`weibo.com,douyin.com`。
*   `设置单次摸鱼时长(分钟)`: 在**单个**摸鱼网站上允许连续停留的最长时间。
*   `设置每小时摸鱼总时长(分钟)`: 在**一小时内**，所有摸鱼网站累计允许的总时长。
*   `清除AI页面分类缓存`: 脚本会缓存 AI 对网站的分类结果。如果 AI 判断有误，你可以用此功能清除缓存，让它下次重新判断。

## 🤝 贡献与反馈

欢迎通过 GitHub Issues 提交 Bug 报告、功能建议或任何想法！

如果你喜欢这个项目，请给它一个 ⭐ Star！

## 📄 许可证

本项目采用 [MIT License](LICENSE) 开源。
